<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HackQuarantine</title>

    <!--Link de css para agregar mapas-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>

   <!--Link de javascript para agregar mapas-->
<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
crossorigin=""></script>

    <!--Aquí están los estilos (colores, bordes, etc)-->
    <style>
        html{ background-color: aquamarine;}
        #map{
            width: 300px;
            height: 300px;
            border: 1px solid;
            position: relative;
        }

        #mapid { height: 400px; }

        .patient{
            width: 5px;
            height: 5px;
            position: absolute;
            display: inline-block;
            background: black;
        }
    </style>
</head>
<body>
    <!--Título-->
    <h1>HackQuarantine</h1>
    By:
    <!--Integrantes-->
    <ul>
        <li>Matías Sandoval</li>
        <li>Fer Nava</li>
        <li>Ricardo Uraga</li>
        <li>Eduardo Villalpando</li>
    </ul>
    <!--En este elemento se mostrarán los pacientes-->
    <div id="map"></div>
    <!--Botón; al hacer click se ejecutará la función updateLocation()-->
    <button id="updatelocation" onclick="updateLocation()">Update location</button>

   <!--mapa leafts-->
    <div id="mapid"></div>


    <!--Acá está el código con la lógica del programa-->
    <script>
        // ESTO ES UN ARRAY CON LOS DATOS DE CADA PACIENTE: su id, lat, long, y probabilidad de estar infectadx
        let patients = [
            { id: 'p0', latitude: 295, longitude: 295, infected: 0.75},
            { id: 'p1', latitude: 40, longitude: 50, infected: 0},
            { id: 'p2', latitude: 50, longitude: 20, infected: 0},
            { id: 'p3', latitude: 20, longitude: 30, infected: 0},
            { id: 'p4', latitude: 20, longitude: 30, infected: 0},
            { id: 'p5', latitude: 20, longitude: 30, infected: 0},
            { id: 'p6', latitude: 20, longitude: 30, infected: 0},
            { id: 'p7', latitude: 20, longitude: 30, infected: 0},
            { id: 'p8', latitude: 20, longitude: 30, infected: 0},
        ]

        


        //Esta es una función que itera por cada paciente, y crea un puntito en el mapa
        function renderPatients(){
            //Seleccionar div con id #map y vacias
            let map = document.querySelector('#map');
            map.innerHTML = '';
            patients.forEach(l=>{
                //Crear puntito
                let patient = document.createElement('div');
                patient.className = 'patient';
                //Asignar posicion según coordenadas
                patient.style.left = l.latitude+'px';
                patient.style.top = l.longitude+'px';
                //Añadir texto
                patient.innerText = l.id;
                //Añadir puntito al mapa
                map.append(patient)
            })
        }

        // Esta función itera por cada paciente y les asigna nuevas coordenadas aleatorias
        function updateLocation(){
            patients.forEach(l=>{
                l.latitude = Math.random() * 300;
                l.longitude = Math.random() * 300;
            })
            renderPatients()
        }

        updateLocation()
        renderPatients()

        //esta línea de código incializa el mapa en londres
       
	var mymap = L.map('mapid').setView([51.505, -0.09], 13);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1
}).addTo(mymap);

L.marker([51.5, -0.09]).addTo(mymap);

L.circle([51.508, -0.11], {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5,
    radius: 500
}).addTo(mymap);

L.polygon([
    [51.509, -0.08],
    [51.503, -0.06],
    [51.51, -0.047]
]).addTo(mymap);



    </script>
</body>
</html>